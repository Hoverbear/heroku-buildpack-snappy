#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir> <env-dir>

set -e
set -o pipefail

# Build related variables.
BUILD_DIR=$1
CACHE_DIR=$2
ENV_DIR=$3

if [[ ! -d "$CACHE_DIR/snappy" ]]; then
    git clone https://github.com/google/snappy
    cd snappy
    ./autogen.sh
    ./configure
    make
fi

export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:$CACHE_DIR/snappy"
